<div class="max-w-2xl mx-auto px-4 py-6 sm:py-8">
  <h1 class="text-xl sm:text-2xl font-bold mb-6">Settings</h1>

  <%= form_with model: @user, url: settings_path, method: :patch, class: "space-y-6" do |f| %>
    <section class="bg-white rounded-lg shadow border border-gray-200 p-4 sm:p-6">
      <h2 class="text-lg font-semibold mb-4">Email Preferences</h2>

      <div class="flex items-start gap-3">
        <%= f.check_box :digest_enabled,
            class: "mt-1 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",
            id: "digest_enabled" %>
        <div>
          <%= f.label :digest_enabled, class: "font-medium text-gray-900 cursor-pointer" do %>
            Daily Digest Email
          <% end %>
          <p class="text-sm text-gray-600 mt-1">
            Receive a daily email at 7 AM with new episodes in your inbox and recently processed summaries.
          </p>
        </div>
      </div>

      <% if @user.digest_sent_at.present? %>
        <p class="text-sm text-gray-500 mt-4">
          Last digest sent: <%= time_ago_in_words(@user.digest_sent_at) %> ago
        </p>
      <% end %>
    </section>

    <section class="bg-white rounded-lg shadow border border-gray-200 p-4 sm:p-6">
      <h2 class="text-lg font-semibold mb-4">Account</h2>

      <div class="space-y-3">
        <div>
          <span class="text-sm text-gray-600">Email</span>
          <p class="font-medium"><%= @user.email %></p>
        </div>
      </div>
    </section>

    <div class="flex justify-end">
      <%= f.submit "Save Settings",
          class: "bg-blue-600 text-white px-6 py-2.5 sm:py-2 rounded-lg hover:bg-blue-700 transition font-medium" %>
    </div>
  <% end %>
</div>
