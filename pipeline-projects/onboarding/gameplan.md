# Phase 2 Onboarding — Engineering Gameplan

> **Generated by:** Pipeline Stage 3 (Gameplan)
> **Date:** 2026-02-07
> **PRD:** `onboarding/prd.md`
> **Discovery Report:** `onboarding/discovery-report.md`
> **Approved Architecture:** `onboarding/architecture-proposal.md`

---

## 1. Project Overview

### Goals
- Enable automatic AI processing of all new podcast episodes without user action
- Redesign the daily digest email from a notification into a standalone newsletter with AI summaries grouped by show
- Add internal email engagement tracking (opens via pixel, clicks via redirect links)
- Backfill ~10 most recent unprocessed episodes per podcast to seed initial digest content
- Validate Job B: "Get value from your entire podcast feed — even the episodes you'll never have time to listen to"

### Scope Summary

| Area | Description | Platform |
|------|-------------|----------|
| Auto-processing pipeline | Trigger episode transcription/summarization on feed poll | Web |
| Digest email redesign | Newsletter format, all episodes, grouped by show, with summaries | Web |
| Engagement tracking | Email open pixel + click redirect links, stored in database | Web |
| Episode detail page | New `/episodes/:id` route for digest links (subscription-scoped) | Web |
| Backfill task | One-time rake task to process ~10 recent episodes per podcast | Web |
| Engagement report | Rake task to query open/click stats | Web |

### Out of Scope
- Polished HTML email design (clean and readable is sufficient)
- Per-user timezone or send-time settings
- Unsubscribe link compliance (handle when real customers exist)
- Cost optimization (transcript caching, lightweight summaries, processing caps)
- Per-show or per-tier customization
- Episode recommendations or editorial curation
- Full retroactive processing of all historical episodes (backfill capped at ~10 per podcast)
- A/B testing of digest formats
- Mobile app integration

### Constraints & Conventions
- Conventions file: `CLAUDE.md` in Show Notes repo
- Agent patterns: `AGENTS.md` in Show Notes repo
- Framework: Rails 8.1, RSpec, Solid Queue, Resend (production email), Letter Opener (dev)
- No feature flags needed — single-user app with invited test users

---

## 2. Open Questions & Decisions

> Resolved during Stages 0-2 (PRD + Discovery + Architecture)

| Question | Status | Decision |
|----------|--------|----------|
| Full transcription vs lightweight RSS summaries? | Resolved | Full transcription — absorb cost (~$50-70) |
| Episode ordering in digest? | Resolved | Grouped by show |
| Processing cap per user? | Resolved | No cap for the test |
| Click tracking approach? | Resolved | Internal redirect links |
| Backfill existing episodes? | Resolved | Backfill ~10 most recent per podcast |
| Adapt existing DigestMailer or new mailer? | Resolved | Adapt in-place — replace old format |
| Listen link destination? | Resolved | Episode page in web app with play button |
| Episode route coexist with library route? | Resolved | Coexist — two routes, two purposes |
| Digest summary source? | Resolved | First section content, truncated to ~200 chars |
| Unfinished episodes in digest? | Resolved | Include with "Summary processing..." note (DIG-008) |

---

## 3. Functional Milestones

### M0: Discovery & Alignment (Complete)
- [x] PRD generated and reviewed (Stage 0)
- [x] Current state documented (Stage 1)
- [x] Architecture proposed and **approved** (Stage 2 + Architecture Review)
- [x] All open questions resolved (Stages 0-2)

---

### M1: Tracking Infrastructure & Episode Route
**What:** Create the `email_events` table, EmailEvent model, TrackingController (click redirect + open pixel), and EpisodesController (subscription-scoped episode detail page). This is the foundation for digest links and engagement tracking.
**Size:** M

**Acceptance Criteria:**
- [ ] TRK-004: `email_events` table exists with columns: user_id, token (unique), event_type, link_type, episode_id, triggered_at, digest_date, user_agent, timestamps
- [ ] TRK-001: Open tracking pixel endpoint (`GET /t/:token/pixel.gif`) returns 1x1 transparent GIF and records `triggered_at` on the EmailEvent
- [ ] TRK-002: Click tracking redirect endpoint (`GET /t/:token`) records `triggered_at` and redirects to the episode page for "summary" link_type
- [ ] TRK-003: Click tracking redirect endpoint redirects to episode page with `#audio` anchor for "listen" link_type
- [ ] TRK-006: If token is not found, click redirect goes to root_path (graceful degradation); pixel always returns GIF regardless
- [ ] TRK-006: Tracking endpoints skip authentication (`skip_before_action :require_authentication`) so email links work without login
- [ ] DIG-003: Episode show page (`GET /episodes/:id`) displays summary sections, quotes with timestamps, and audio player for episodes the user is subscribed to
- [ ] DIG-004: Episode show page includes HTML5 audio player with the episode's audio_url
- [ ] DIG-008: Episode show page shows "Summary processing..." state when summary is not yet available
- [ ] Security: Episode show page returns redirect to root with alert if user is not subscribed to the episode's podcast
- [ ] Security: Tracking link destinations are internal only (`allow_other_host: false`); no open redirect possible

**Web:**
- [ ] Migration: `create_email_events` with indexes (token unique, user_id+digest_date, episode_id+event_type) and foreign keys
- [ ] Model: `app/models/email_event.rb` — validations, scopes (opens, clicks, triggered, for_date), `trigger!` method
- [ ] Model: Add `has_many :email_events` to User and Episode models
- [ ] Model: Add `with_summary` and `published_after` scopes to Episode model
- [ ] Controller: `app/controllers/tracking_controller.rb` — click redirect, pixel response, `TRANSPARENT_GIF` constant
- [ ] Controller: `app/controllers/episodes_controller.rb` — show action with subscription scoping
- [ ] View: `app/views/episodes/show.html.erb` — summary sections, quotes, audio player (adapted from library/show layout, no archive/regenerate buttons)
- [ ] Routes: `resources :episodes, only: [:show]`, `get "t/:token" => "tracking#click"`, `get "t/:token/pixel.gif" => "tracking#pixel"`
- [ ] Tests: EmailEvent model spec (validations, scopes, trigger!), TrackingController request spec (click redirect, pixel, invalid token), EpisodesController request spec (show, subscription scoping, unauthorized)

**iOS:** N/A
**Android:** N/A

**Dependencies:** None (first milestone)

---

### M2: Auto-Processing Pipeline
**What:** Create `AutoProcessEpisodeJob` and wire it into `FetchPodcastFeedJob` so new episodes are automatically transcribed and summarized when discovered during feed polling. Create the backfill rake task.
**Size:** M

**Acceptance Criteria:**
- [ ] AUTO-001: New episodes from subscribed podcasts are automatically queued for AI processing when discovered during feed polling
- [ ] AUTO-002: Auto-processing occurs without any user action — no Library add required
- [ ] AUTO-003: Auto-processing uses the existing AssemblyAI transcription + Claude summarization pipeline
- [ ] AUTO-004: Episodes that already have transcripts and summaries are not re-processed (skip check at job start)
- [ ] AUTO-005: Processing failures for individual episodes do not block processing of other episodes (error logged, job continues)
- [ ] AUTO-006: No processing cap per user — all episodes are processed
- [ ] AUTO-007: Backfill rake task queues ~10 most recent unprocessed episodes per podcast for all subscribers
- [ ] AUTO-005: `AutoProcessEpisodeJob` retries up to 5 times with exponential backoff on rate limit errors

**Web:**
- [ ] Job: `app/jobs/auto_process_episode_job.rb` — Episode-level processing with retry logic (MAX_RETRIES=5, exponential backoff)
- [ ] Job: Modify `app/jobs/fetch_podcast_feed_job.rb` — add `AutoProcessEpisodeJob.perform_later(episode.id)` after new episode creation
- [ ] Rake task: `lib/tasks/backfill_processing.rake` — `onboarding:backfill_episodes`, queries unprocessed episodes per podcast, limits to 10, enqueues AutoProcessEpisodeJob
- [ ] Tests: AutoProcessEpisodeJob spec (happy path, skip-if-processed, retry on rate limit, max retries exceeded), FetchPodcastFeedJob spec update (verify AutoProcessEpisodeJob enqueued), backfill rake task spec

**iOS:** N/A
**Android:** N/A

**Dependencies:** None (independent of M1 — can be built in parallel)

---

### M3: Digest Email Redesign
**What:** Rewrite the DigestMailer and its templates to produce a newsletter-format email: all new episodes grouped by show, with AI summaries, tracking links (click redirects + open pixel), and the new subject line format.
**Size:** L

**Acceptance Criteria:**
- [ ] DIG-001: Daily digest includes ALL new episodes since the last digest (no truncation, no limit)
- [ ] DIG-002: Each episode entry displays: show name, episode title, and 2-3 sentence summary (first section content, truncated to ~200 chars)
- [ ] DIG-003: Each episode entry includes a "Read full summary" link that is a tracking redirect to the episode show page
- [ ] DIG-004: Each episode entry includes a "Listen" link that is a tracking redirect to the episode show page with `#audio` anchor
- [ ] DIG-005: Summary text is the most visually prominent element per episode — more prominent than the title
- [ ] DIG-006: Episodes are visually separated with clear boundaries for fast scanning
- [ ] DIG-007: Email header shows date and total episode count (e.g., "Your podcasts this morning — 14 new episodes")
- [ ] DIG-008: Episodes without a summary yet are included with title and "Summary processing..." note
- [ ] DIG-009: Episodes are grouped by show, shows sorted alphabetically, episodes within each show sorted by published_at DESC
- [ ] DIG-010: Digest is clean and readable (inline CSS, not polished)
- [ ] DIG-011: Existing DigestMailer class is adapted in-place (same class, same job scheduling)
- [ ] DIG-012: Digest continues to send at 7 AM Eastern (12 PM UTC) via existing Solid Queue recurring schedule
- [ ] DIG-013: If a user has no new episodes since the last digest, no email is sent
- [ ] TRK-001: Tracking pixel `<img>` tag is embedded in the HTML email, referencing the open event token
- [ ] TRK-002: "Read full summary" links use tracking redirect URLs (`/t/:token`)
- [ ] TRK-003: "Listen" links use tracking redirect URLs (`/t/:token`)

**Web:**
- [ ] Mailer: Rewrite `app/mailers/digest_mailer.rb` — new query path (Subscription → Episode), group_by podcast, tracking event pre-creation
- [ ] Job: Rewrite `app/jobs/send_daily_digest_job.rb` — simplified `has_new_episodes?` using Subscription → Episode path
- [ ] View: Rewrite `app/views/digest_mailer/daily_digest.html.erb` — newsletter format, grouped by show, summary-prominent, tracking links, tracking pixel
- [ ] View: Rewrite `app/views/digest_mailer/daily_digest.text.erb` — plain-text version matching newsletter format (grouped by show, summaries included)
- [ ] Tests: DigestMailer spec (all episodes included, grouped by show, summaries truncated, tracking links present, tracking pixel present, empty digest not sent, processing-state episodes included), SendDailyDigestJob spec update (new decision logic, digest_sent_at update)

**iOS:** N/A
**Android:** N/A

**Dependencies:** M1 (tracking infrastructure — mailer creates EmailEvent rows and generates tracking URLs), M2 (auto-processing — episodes need summaries for the digest to show)

---

### M4: Onboarding Flow Updates
**What:** Update the OPML import completion page and auto-processing trigger to ensure new users get episodes processed immediately after import. Ensure first digest arrives the next morning.
**Size:** S

**Acceptance Criteria:**
- [ ] ONB-001: After OPML import completes and feeds are fetched, auto-processing begins for all discovered episodes in the background (FetchPodcastFeedJob already triggers AutoProcessEpisodeJob per M2)
- [ ] ONB-002: Import completion page message is clear: "Your first podcast briefing arrives tomorrow morning" (verify existing copy in `imports/complete.html.erb` still applies)
- [ ] ONB-003: Magic link invitation flow works for onboarding test users (verify existing auth mechanism, no changes needed)
- [ ] Edge case: User importing OPML at 6:55 AM — first digest goes out the next day since no episodes will be processed in 5 minutes

**Web:**
- [ ] Verify: `imports/complete.html.erb` already says "Your first digest arrives tomorrow morning" — confirm no changes needed
- [ ] Verify: `FetchPodcastFeedJob` with `initial_fetch: true` limits to 10 episodes AND now triggers `AutoProcessEpisodeJob` (from M2)
- [ ] Verify: `SessionsController` magic link flow works for new users being onboarded
- [ ] Tests: Integration check — OPML import → feed fetch → auto-processing enqueued (may be covered by M2 tests)

**iOS:** N/A
**Android:** N/A

**Dependencies:** M2 (auto-processing trigger must be in FetchPodcastFeedJob)

---

### M5: QA Test Data
**What:** Create a seed task that populates realistic test data covering all feature scenarios — multiple podcasts with varying episode counts, processed and unprocessed episodes, digest email events, and a test user ready for manual QA.
**Size:** S

**Acceptance Criteria:**
- [ ] Seed task exists at `lib/tasks/qa_seed.rake` (namespace: `onboarding:seed`)
- [ ] Task creates a test user with `digest_enabled: true` and a recent `digest_sent_at`
- [ ] Task seeds 3-5 podcasts with subscriptions, each with 5-15 episodes (varying published_at dates)
- [ ] Task seeds a mix: some episodes with transcripts+summaries (ready), some without (pending processing)
- [ ] Task seeds EmailEvent records for a sample digest (1 open event + click events per episode)
- [ ] Task is idempotent (can re-run without duplicating data)
- [ ] Task prints a summary of what was created (user email, podcast count, episode count, URLs to test)
- [ ] All scenarios from manual QA have supporting test data: empty digest (no new episodes), large digest (20+ episodes), mixed processing states

**Web:**
- [ ] Rake task: `lib/tasks/qa_seed.rake` — idempotent, creates test data
- [ ] No production-unsafe operations (dev/staging only)

**iOS:** N/A
**Android:** N/A

**Dependencies:** M1, M2, M3 (needs full feature implemented)

---

### M6: Edge Cases, Empty States & Polish
**What:** Handle all edge cases from the PRD, engagement reporting task, and final polish.
**Size:** S

**Acceptance Criteria:**
- [ ] Edge case: User with 0 new episodes since last digest receives no email (DIG-013, covered in M3 but verify)
- [ ] Edge case: User with 50+ new episodes — all included, email renders correctly (long email OK)
- [ ] Edge case: Episode processing fails — episode appears in digest with title only, "Summary unavailable" note
- [ ] Edge case: Multiple episodes from the same show — each listed individually under the show header
- [ ] Edge case: Tracking pixel blocked by email client — open event not recorded, clicks still work
- [ ] Edge case: User clicks tracking link but tracking fails — user still reaches destination (graceful degradation)
- [ ] Edge case: Very long episode summary — digest shows truncated version, full version on episode page
- [ ] Edge case: Podcast feed returns duplicate episodes — existing dedup logic handles this (verify no regression)
- [ ] TRK-005: Engagement report rake task (`onboarding:engagement_report`) prints opens per user per day, clicks per episode
- [ ] Settings page description for digest_enabled reflects the new digest format (verify copy is still accurate)

**Web:**
- [ ] Rake task: `lib/tasks/engagement_report.rake` — `onboarding:engagement_report`, queries EmailEvent triggered records grouped by date, type, link_type
- [ ] View: Verify digest email handles edge cases (no summary, long content, many episodes) — may need minor template adjustments from M3
- [ ] View: Verify settings page (`app/views/settings/show.html.erb`) description text is still accurate for new digest format
- [ ] Tests: Edge case specs as needed (processing failure display, empty digest suppression)

**iOS:** N/A
**Android:** N/A

**Dependencies:** M3 (digest must be implemented), M1 (tracking must exist for engagement report)

---

## 4. Non-Functional Requirements Checklist

### Data Model & API
> Reviewed and approved in Architecture Review checkpoint.

- [x] Architecture proposal approved: `onboarding/architecture-proposal.md` (Status: Accepted, Reviewer: Dave, Date: 2/7/2026)
- [x] Milestones correctly reference the approved data model (email_events in M1) and routes (episodes, tracking in M1)
- [x] No contradictions between gameplan and approved architecture

### Security & Access Control
- [x] Episode show page scoped to subscription: `current_user.podcasts.exists?(id: episode.podcast_id)`
- [x] Digest query scoped to user's subscriptions: `Episode.joins(podcast: :subscriptions).where(subscriptions: { user_id: user.id })`
- [x] Tracking endpoints skip authentication (opaque tokens, internal destinations only)
- [x] `allow_other_host: false` on tracking redirects prevents open redirect
- [x] Tokens are `SecureRandom.urlsafe_base64(16)` — 128 bits of randomness, infeasible to enumerate
- [x] No API authentication concerns (web-only app)

### Performance
- [x] Digest query uses `includes(:podcast, :summary)` to avoid N+1
- [x] `email_events` indexed on token (unique), user_id+digest_date, episode_id+event_type
- [x] Episodes table already indexed on podcast_id and (podcast_id, guid)
- [x] Auto-processing is async via Solid Queue — doesn't block web requests
- [x] Backfill task enqueues jobs (not inline processing) — won't overwhelm the worker
- [ ] Caching needed? No — test phase with 3 users, negligible load
- [x] N+1 risks identified: digest query `group_by(&:podcast)` after `includes` avoids N+1

### Observability & Debuggability
- [x] `AutoProcessEpisodeJob` logs errors with episode ID: `Rails.logger.error("[AutoProcessEpisodeJob] ...")`
- [x] `SendDailyDigestJob` logs sent/skipped counts: `Rails.logger.info("[SendDailyDigestJob] ...")`
- [x] EmailEvent records provide a queryable audit trail of all digest engagement
- [x] `onboarding:engagement_report` rake task for human-readable stats
- [x] Debug path: query `EmailEvent.where(user_id:, digest_date:)` to see all events for a specific digest
- [ ] Alerts needed? No — test phase, manual monitoring via rake task and logs

### Analytics & Instrumentation

#### Success Metrics
- [ ] 2/3 test users open digest 5+ times in one week (measured via EmailEvent opens)
- [ ] Users click "Read full summary" on episodes they didn't listen to (measured via EmailEvent clicks)
- [ ] At least 1 user discovers and listens to an episode via summary (measured via click + follow-up interview)
- [ ] If 0/3 users open after day 3, Job B is invalidated (measured via EmailEvent opens by date)

#### Events to Track

| Event Name | Trigger | Key Properties | Platform |
|------------|---------|----------------|----------|
| Digest open | User opens email (tracking pixel fires) | user_id, digest_date | Web (email) |
| Summary click | User clicks "Read full summary" link | user_id, episode_id, digest_date | Web (email) |
| Listen click | User clicks "Listen" link | user_id, episode_id, digest_date | Web (email) |

#### Instrumentation Approach
- [x] Framework: Custom `email_events` table — no external analytics infrastructure needed
- [x] Implementation: Pre-created events in DigestMailer, triggered via TrackingController
- [x] Reporting: `onboarding:engagement_report` rake task queries the table

### Testing Plan

| Type | Coverage | Platform | Owner |
|------|----------|----------|-------|
| Model specs | EmailEvent validations, scopes, trigger! | Rails | Pipeline |
| Job specs | AutoProcessEpisodeJob (happy path, skip, retry, max retries), FetchPodcastFeedJob (auto-process trigger) | Rails | Pipeline |
| Mailer specs | DigestMailer (all episodes, grouped, summaries, tracking links, pixel, empty digest, processing state) | Rails | Pipeline |
| Request specs | EpisodesController (show, subscription scoping), TrackingController (click, pixel, invalid token) | Rails | Pipeline |
| Job specs | SendDailyDigestJob (new decision logic) | Rails | Pipeline |
| Manual QA | End-to-end: OPML import → auto-processing → digest email → click tracking → episode page | Web | Human |

### Feature Flags & Rollout
- N/A — Show Notes is a single-user app with invited test users. No feature flag infrastructure needed. The feature ships directly; rollback is reverting the deploy.

### Mobile-Specific
- N/A — Level 2 (web-only) project

### Legacy & Migration
- [x] Old digest format is replaced — users receive new format immediately upon deploy
- [x] Library show page (`/library/:id`) unchanged — coexists with new episode route
- [x] Inbox/archive/trash workflows unchanged
- [x] No data migration needed — new table starts empty, backfill is on-demand

### Export/Reporting
- [x] No existing exports affected
- [x] Engagement data accessible via `onboarding:engagement_report` rake task (TRK-005)

---

## 5. Dependencies & Risks

| Risk/Dependency | Impact | Mitigation |
|-----------------|--------|------------|
| AssemblyAI rate limits under burst processing | Med | AutoProcessEpisodeJob has 5 retries with exponential backoff. Backfill task enqueues (doesn't inline), spreading load. |
| Claude API rate limits | Med | ClaudeClient already has 2-sec delay between calls. AutoProcessEpisodeJob retries on RateLimitError. |
| Auto-processing cost (~$0.46/episode × 50 ep/user/week) | Med | PRD explicitly accepts $50-70 for the test. No processing cap. |
| Email deliverability with tracking pixel | Low | Some clients proxy/block images. Open tracking is inherently unreliable. Clicks are the reliable metric. |
| Solid Queue capacity for burst of backfill jobs | Low | Jobs are enqueued, not inline. In-process Puma worker handles jobs sequentially. No parallelism issues. |
| Digest email size with 50+ episodes | Low | Keep per-episode content to ~200 char summary + links. At 50 episodes, ~15KB of content — well under Gmail's 102KB clip limit. |

---

## 6. Release Plan

### Phases

| Phase | What Ships | Audience |
|-------|-----------|----------|
| Phase 1 | M1-M6: Full feature (auto-processing + newsletter digest + tracking) | 2-3 invited test users (Marcus, Ethan) |
| Phase 2 (if Job B validates) | Cost optimization + polish | Broader beta |

### Done Criteria
- [ ] All acceptance criteria met across M1-M6
- [ ] All tests passing (`bundle exec rspec`)
- [ ] Backfill rake task run for test users
- [ ] At least one digest email sent and received
- [ ] Tracking pixel and click links verified working
- [ ] QA seed data available for manual testing

---

## 7. Estimates

| Milestone | Size | Notes |
|-----------|------|-------|
| M0: Discovery & Alignment | Done | Pipeline Stages 0-2 |
| M1: Tracking Infrastructure & Episode Route | M | Migration, 2 controllers, 1 model, 1 view, routes, tests |
| M2: Auto-Processing Pipeline | M | 1 new job, 1 modified job, 1 rake task, tests |
| M3: Digest Email Redesign | L | Mailer rewrite, 2 template rewrites, job rewrite, comprehensive tests |
| M4: Onboarding Flow Updates | S | Mostly verification — existing import flow already has the right messaging |
| M5: QA Test Data | S | 1 rake task, idempotent seed data |
| M6: Edge Cases & Polish | S | 1 rake task (engagement report), edge case verification, minor view tweaks |

---

## PRD Traceability Matrix

| PRD Requirement | Milestone | Acceptance Criterion |
|----------------|-----------|---------------------|
| AUTO-001 | M2 | AUTO-001: New episodes queued for processing on feed poll |
| AUTO-002 | M2 | AUTO-002: No user action required |
| AUTO-003 | M2 | AUTO-003: Uses existing AssemblyAI + Claude pipeline |
| AUTO-004 | M2 | AUTO-004: Already-processed episodes not re-processed |
| AUTO-005 | M2 | AUTO-005: Failures don't block other episodes; retries with backoff |
| AUTO-006 | M2 | AUTO-006: No processing cap |
| AUTO-007 | M2 | AUTO-007: Backfill ~10 most recent per podcast |
| DIG-001 | M3 | DIG-001: All new episodes included |
| DIG-002 | M3 | DIG-002: Show name, title, summary per episode |
| DIG-003 | M1, M3 | DIG-003: "Read full summary" link to episode page (M1), tracking link in digest (M3) |
| DIG-004 | M1, M3 | DIG-004: "Listen" link to episode page with player (M1), tracking link in digest (M3) |
| DIG-005 | M3 | DIG-005: Summary is most prominent element |
| DIG-006 | M3 | DIG-006: Visual separation between episodes |
| DIG-007 | M3 | DIG-007: Header with date and count |
| DIG-008 | M1, M3 | DIG-008: "Summary processing..." for unfinished episodes (episode page in M1, digest in M3) |
| DIG-009 | M3 | DIG-009: Grouped by show |
| DIG-010 | M3 | DIG-010: Clean and readable |
| DIG-011 | M3 | DIG-011: Existing DigestMailer adapted |
| DIG-012 | M3 | DIG-012: 7 AM Eastern via existing schedule |
| DIG-013 | M3 | DIG-013: Skip empty digests |
| TRK-001 | M1, M3 | TRK-001: Open tracking pixel (endpoint in M1, embedded in digest in M3) |
| TRK-002 | M1, M3 | TRK-002: Click tracking on "Read full summary" (endpoint in M1, links in digest in M3) |
| TRK-003 | M1, M3 | TRK-003: Click tracking on "Listen" (endpoint in M1, links in digest in M3) |
| TRK-004 | M1 | TRK-004: email_events table with queryable data |
| TRK-005 | M6 | TRK-005: Engagement report rake task |
| TRK-006 | M1 | TRK-006: Graceful degradation, no auth required for tracking |
| ONB-001 | M4 | ONB-001: Auto-processing begins after OPML import |
| ONB-002 | M4 | ONB-002: Completion page shows "first briefing tomorrow" |
| ONB-003 | M4 | ONB-003: Magic link invitation flow |

---

## Approval Checklist

> **This gameplan requires human review and approval before test generation begins.**

### Reviewer: Dave
### Date: 2/7/2026
### Status: Accepted

#### Must Verify
- [x] Milestone breakdown is logical and correctly sequenced
- [x] Acceptance criteria are specific and testable
- [x] Every PRD requirement ID is mapped to a milestone (traceability matrix complete)
- [x] Non-functional requirements checklist is fully addressed
- [x] Dependencies form a valid DAG (no circular dependencies)
- [x] Milestone sizes are appropriate (no XL milestones that should be split)
- [x] Release plan is appropriate

#### Optional Notes
[Any modifications, corrections, or additional context for the implementation team]

---

## Changelog

| Date | Author | Changes |
|------|--------|---------|
| 2026-02-07 | Pipeline | Initial gameplan generated |
